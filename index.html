<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bacon.js/0.7.70/Bacon.min.js"></script>
	<script>
	$(function(){
		
		var meter = $("#wrap");
	    var html  = $("html");

        function getXY(evt) {
            var target  = $(evt.target).attr('id');
            if (target == 'meter') {
                return {
                    x: evt.offsetX,
                    y: evt.offsetY
                };
            }
            else {
                var y = evt.pageY - ($("#meter").offset().top);
                return {
                    x: evt.offsetX,
                    y: y
                };
            }
        }
	    
	    var mousedown = meter.asEventStream('mousedown'),
	    	mouseup = html.asEventStream('mouseup'),
	    	mousemove = html.asEventStream('mousemove'),
	    	mousedrag = mousedown.flatMap(function() {
	    		return mousemove.map(function(evt) {
                    return getXY(evt);
	    		}).takeUntil(mouseup);
	    	});

	    mousedrag.onValue(function(pos) {
            var top = (pos.y > 380) ? 380 : ((pos.y < 0) ? 0 : pos.y );
	    	$("#button").css("top", top + "px")
	    })
	    
	})
	</script>
</head>
<style type="text/css">
	#canvas {
		width: 800px;
		height: 600px;
		position: relative;
		border: 1px solid #999;
        margin: 0 auto;
	}
	#wrap {
		position: absolute;
		left: 50px;
		top:50px;
		height: 400px;
		width: 30px;
		border: 1px solid #000;
	}
	#meter {
		width: 100%;
		height: 100%;
		float: left;
		/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#ff4747+0,fcff56+50,6ae847+99,6ae847+99 */
        background: linear-gradient(to bottom,  rgb(255,71,71) 0%,rgb(255,255,71) 50%); /* W3C */
	}
	#clickable-block {
	    width:10em;
	    height:10em;
	    background: #F1C40F;
	    position:absolute;
	}
	#button {
		position: absolute;
		top: 380px;
		width: 40px;
        margin-left: -5px;
		height: 20px;
        background: linear-gradient(to bottom,  rgb(70,239,47) 0%,rgb(106,234,63) 21%,rgb(55,204,55) 56%,rgb(50,181,50) 100%); /* W3C */
        border: 1px solid #2BA029;
        border-radius: 4px;
        box-sizing:border-box;
	}
</style>
<body>


<div id="canvas">

	<div id="wrap">
		<div id="meter"></div>
		<div id="button"></div>
	</div>
	
</div>
</body>
</html>