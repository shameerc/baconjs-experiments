<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bacon.js/0.7.70/Bacon.min.js"></script>
	<script>
	$(function(){
		
		var meter = $("#wrap");
	    var html  = $("html");

        function getXY(evt) {
            var target  = $(evt.target).attr('id');
            if (target == 'meter') {
                return {
                    x: evt.offsetX,
                    y: evt.offsetY
                };
            }
            else {
                var y = evt.pageY - ($("#meter").offset().top);
                return {
                    x: evt.offsetX,
                    y: y
                };
            }
        }
	    
	    var mousedown = meter.asEventStream('mousedown'),
	    	mouseup = html.asEventStream('mouseup'),
	    	mousemove = meter.asEventStream('mousemove'),
	    	mousedrag = mousedown.flatMap(function() {
	    		return mousemove.map(function(evt) {
                    return getXY(evt);
	    		}).takeUntil(mouseup);
	    	});

	    mousedrag.onValue(function(pos) {
            var top = (pos.y > 380) ? 380 : pos.y;
	    	$("#button").css("top", top + "px")
	    })
	    
	})
	</script>
</head>
<style type="text/css">
	#canvas {
		width: 800px;
		height: 600px;
		position: relative;
		border: 1px solid #999;
	}
	#wrap {
		position: absolute;
		left: 50px;
		top:50px;
		height: 400px;
		width: 30px;
		border: 1px solid #000;
	}
	#meter {
		width: 100%;
		height: 100%;
		float: left;
		background: yellow;
	}
	#clickable-block {
	    width:10em;
	    height:10em;
	    background: #F1C40F;
	    position:absolute;
	}
	#button {
		position: absolute;
		top: 0;
		width: 100%;
		height: 20px;
		background: red;
	}
</style>
<body>


<div id="canvas">

	<div id="wrap">
		<div id="meter"></div>
		<div id="button"></div>
	</div>
	
</div>
</body>
</html>